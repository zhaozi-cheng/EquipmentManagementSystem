import{u as h}from"./device-DskUdwi2.js";import{d as g,r as w,c as x,w as t,a as n,o as f,b as e,e as V,F as M,f as Q,g as _,h as R,i as q,u as B,j as E}from"./index-DwLw2ijU.js";const U=g({__name:"DeviceQuery",emits:["query"],setup(D,{emit:d}){const c=d,a=w({name:"",category:"",status:"",purchaseDateRange:[]}),b=[{value:"computer",label:"计算机类"},{value:"network",label:"网络设备"},{value:"experiment",label:"实验仪器"},{value:"office",label:"办公设备"},{value:"other",label:"其他"}],v=()=>{c("query",a.value)},r=()=>{a.value={name:"",category:"",status:"",purchaseDateRange:[]},c("query",a.value)};return(u,l)=>{const m=n("el-input"),s=n("el-form-item"),p=n("el-option"),i=n("el-select"),k=n("el-date-picker"),y=n("el-button"),C=n("el-form");return f(),x(C,{model:a.value,"label-width":"80px",inline:""},{default:t(()=>[e(s,{label:"设备名称"},{default:t(()=>[e(m,{modelValue:a.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>a.value.name=o),placeholder:"请输入设备名称",clearable:""},null,8,["modelValue"])]),_:1}),e(s,{label:"设备类别"},{default:t(()=>[e(i,{modelValue:a.value.category,"onUpdate:modelValue":l[1]||(l[1]=o=>a.value.category=o),placeholder:"请选择设备类别",clearable:""},{default:t(()=>[(f(),V(M,null,Q(b,o=>e(p,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"状态"},{default:t(()=>[e(i,{modelValue:a.value.status,"onUpdate:modelValue":l[2]||(l[2]=o=>a.value.status=o),placeholder:"请选择状态",clearable:""},{default:t(()=>[e(p,{label:"正常",value:"normal"}),e(p,{label:"维修中",value:"repairing"}),e(p,{label:"已报废",value:"scrapped"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"购置日期"},{default:t(()=>[e(k,{modelValue:a.value.purchaseDateRange,"onUpdate:modelValue":l[3]||(l[3]=o=>a.value.purchaseDateRange=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(y,{type:"primary",onClick:v},{default:t(()=>l[4]||(l[4]=[_("查询")])),_:1}),e(y,{onClick:r},{default:t(()=>l[5]||(l[5]=[_("重置")])),_:1})]),_:1})]),_:1},8,["model"])}}}),S=g({__name:"DeviceList",setup(D){const d=h(),c=E();R(async()=>{await d.fetchDevices()});const a=r=>{d.fetchDevices(r)},b=r=>{c.push({name:"edit-device",params:{id:r}})},v=async r=>{try{await d.deleteDevice(r.toString()),ElMessage.success("设备删除成功")}catch{ElMessage.error("设备删除失败")}};return(r,u)=>{const l=n("el-table-column"),m=n("el-button"),s=n("el-table");return f(),V("div",null,[u[2]||(u[2]=q("h2",null,"设备列表",-1)),e(U,{onQuery:a}),e(s,{data:B(d).devices,style:{width:"100%"}},{default:t(()=>[e(l,{prop:"id",label:"内部编号"}),e(l,{prop:"category",label:"设备类别"}),e(l,{prop:"name",label:"设备名称"}),e(l,{prop:"model",label:"型号"}),e(l,{prop:"specification",label:"规格"}),e(l,{prop:"price",label:"单价"}),e(l,{prop:"purchaseDate",label:"购置日期"}),e(l,{prop:"manufacturer",label:"生产厂家"}),e(l,{prop:"purchaser",label:"购买人"}),e(l,{prop:"status",label:"状态"}),e(l,{label:"操作"},{default:t(p=>[e(m,{type:"primary",onClick:i=>b(p.row.id)},{default:t(()=>u[0]||(u[0]=[_("编辑")])),_:2},1032,["onClick"]),e(m,{type:"danger",onClick:i=>v(p.row.id)},{default:t(()=>u[1]||(u[1]=[_("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])}}});export{S as default};
